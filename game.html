<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocolo de Acceso - Terminal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style-game.css">
</head>
<body>
    <div id="vignette" class="overlay"></div>
    
    <!-- === MODALES DEL JUEGO === -->
    <div id="feedback-overlay-container" class="modal-overlay">
        <div id="feedback-overlay"></div>
    </div>

    <!-- NUEVO: Overlay de Carga/Conexión -->
    <div id="connecting-overlay" class="modal-overlay">
        <div class="connecting-box">
            <p id="connecting-text">CONECTANDO CON EL SIGUIENTE SOLICITANTE...</p>
            <div class="spinner"></div>
        </div>
    </div>
    
    <div id="hack-minigame" class="modal-overlay">
        <h2>INTRUSIÓN DE SISTEMA</h2>
        <p>REPLIQUE LA SECUENCIA ANTES DEL BLOQUEO:</p>
        <div id="hack-sequence"></div>
        <input type="text" id="hack-input" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
        <div id="hack-timer-container" style="border: 1px solid var(--hack-color); padding: 2px;"><div id="hack-timer"></div></div>
    </div>

    <div id="daily-briefing-overlay" class="modal-overlay">
        <div class="modal-box">
            <h2 id="briefing-title"></h2>
            <ul id="daily-briefing-news"></ul>
            <button id="start-day-btn" class="action-button">INICIAR JORNADA</button>
        </div>
    </div>

    <div id="end-of-day-overlay" class="modal-overlay">
        <div class="modal-box" id="end-of-day-section">
            <h2 id="eod-title">FIN DE LA JORNADA</h2>
            <div id="bills-section">
                <h3>Gastos de Subsistencia</h3>
                <ul id="bills-list"></ul>
                <hr>
                <p id="bills-total" style="font-size: 1.8rem;"></p>
                <button id="pay-bills-btn" class="action-button">PAGAR GASTOS</button>
            </div>
            <div id="shop-section" style="display: none;">
                <h3>Mercado Negro (Mejoras)</h3>
                <p id="shop-money-display"></p>
                <div id="shop-items"></div>
                <button id="show-lore-btn" class="action-button">FINALIZAR COMPRAS</button>
            </div>
            <div id="lore-section" style="display: none;">
                <h3>Transmisión Interceptada</h3>
                <p id="lore-reveal-text"></p>
                <button id="next-day-btn" class="action-button">PROCEDER AL DÍA SIGUIENTE</button>
            </div>
        </div>
    </div>
    
    <!-- *** NUEVO: MODAL PARA ESCENAS DE HISTORIA *** -->
    <div id="story-scene-overlay" class="modal-overlay">
        <div class="modal-box story-box">
            <img id="story-char-img" src="" alt="Personaje"/>
            <div class="story-dialogue">
                <p id="story-dialogue-text"></p>
                <div id="story-choices"></div>
            </div>
        </div>
    </div>

    <div id="tutorial-overlay" class="modal-overlay" style="display: none;">
        <div id="tutorial-highlighter"></div>
        <div id="tutorial-box">
            <p id="tutorial-text"></p>
            <button id="tutorial-next-btn" class="action-button">SIGUIENTE ></button>
        </div>
    </div>
    
    <!-- === INTERFAZ PRINCIPAL DEL JUEGO === -->
    <div class="game-container" style="visibility: hidden;">
        <div class="applicant-pane">
            <h1>Solicitud de Acceso</h1>
            <!-- *** MODIFICADO: CONTENEDOR PARA FOTO Y DATOS *** -->
            <div class="applicant-presentation">
                <div class="applicant-photo-container">
                    <img id="applicant-photo" src="" alt="Retrato del solicitante" />
                </div>
                <div id="applicant-data-container">
                    <div class="applicant-field"><strong>Nombre:</strong> <span id="applicant-name"></span></div>
                    <div class="applicant-field" style="animation-delay: 0.1s;"><strong>País de Origen:</strong> <span id="applicant-country"></span></div>
                    <div class="applicant-field" style="animation-delay: 0.2s;"><strong>ID de Conexión:</strong> <span id="applicant-id"></span></div>
                    <div class="applicant-field" style="animation-delay: 0.3s;"><strong>Motivo de Conexión:</strong> <span id="applicant-reason"></span></div>
                </div>
            </div>
            <div id="financial-info" class="applicant-field" style="animation-delay: 0.4s;">
                <strong>Datos Financieros:</strong> 
                <span>Saldo: <span id="applicant-balance"></span> Créditos</span>
                <button id="hack-btn">[ INICIAR HACKEO ]</button>
            </div>
        </div>

        <div class="info-pane">
            <div id="stats-box" class="info-box">
                <span id="day-counter">DÍA: 1</span>
                <span id="money-counter">CRÉDITOS: 0</span>
                <span id="applicant-counter">SOLICITUD: 1 / 5</span>
            </div>
            <div id="rules-box" class="info-box">
                <h2>Directivas del Día</h2>
                <ul id="rules-list"></ul>
            </div>
            <div id="comms-box" class="info-box">
                <h2>Registro de Comunicaciones</h2>
                <div id="comms-log"><p>> Esperando conexión...</p></div>
            </div>
            <div id="timer-box" class="info-box">
                <h2>Tiempo Restante</h2>
                <div id="timer-bar-container"><div id="timer-bar"></div></div>
            </div>
        </div>
    </div>

    <div class="decision-bar" style="visibility: hidden;">
        <button id="approve-btn" class="decision-button">Aprobar</button>
        <button id="deny-btn" class="decision-button">Denegar</button>
    </div>

    <script src="script-game.js"></script>
</body>
</html>
